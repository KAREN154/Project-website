(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6119],{24706:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/design/preview/[pageId]",function(){return n(33033)}])},17698:function(e,t,n){"use strict";var r=n(52322),o=n(97729),i=n.n(o),a=n(37713),u=n(13800);t.Z=function(e){var t=e.children,n=(0,a.W)().site.logo,o=(0,u.Z)(n);return(0,r.jsxs)(i(),{children:[(0,r.jsx)("link",{rel:"shortcut icon",href:o}),t]})}},7602:function(e,t,n){"use strict";var r=n(70865),o=n(96670),i=n(52322),a=n(2784),u=n(5632),c=n(41396),s=n(17087),d=n(53253),l=n(62220);t.Z=function(e){var t=function(t){var n=(0,u.useRouter)(),f=(0,s.md)(),p=(0,c.Z)(),m=p.isAuth,v=p.user,h=n.pathname,y=f.hasRoutePermission(h);return(0,a.useEffect)((function(){return d.Xf.includes(f.role)?location.href=location.origin:f.role&&!1===y?n.push("/"):void 0}),[f.role,y,n]),(0,a.useEffect)((function(){if(!1===m)return n.push("/login")}),[m,n]),!f.role||d.Xf.includes(f.role)?(0,i.jsx)(l.Z,{"data-testid":"loading",size:"large"}):y?(0,i.jsx)(e,(0,o.Z)((0,r.Z)({},t),{role:f.role,user:v})):null};return(0,a.memo)(t)}},78996:function(e,t,n){"use strict";n.d(t,{BK:function(){return P},O$:function(){return A},Y0:function(){return D},bX:function(){return M}});var r=n(98788),o=n(70865),i=n(66383),a=n(50930),u=n(5163),c=n(52322),s=n(2784),d=n(84636),l=n.n(d),f=n(30942),p=n(85702),m=n(3283),v=n(28684),h=n(56127),y=n(72514),E=n(8388),g=n(42086),b=n(2147),T=n(65964),C=n(37713),I=n(62220),R=n(62918),_=function(e){var t=e.collection,n=e.fieldKey;return null===t||void 0===t?void 0:t.fields.map((function(e){return{code:"RICH_TEXT"===e.type?"{{{edjsRichText ".concat(n,".").concat(e.fieldKey,"}}}"):"{{".concat(n,".").concat(e.fieldKey,"}}"),type:e.type,name:e.label}})).concat({name:"Created At",type:"DATE",code:"{{longDate ".concat(n,".createdAt}}")},{name:"Updated At",type:"DATE",code:"{{longDate ".concat(n,".updatedAt}}")})},M=function(e){var t,n,r=e.slug,o=e.type,i=e.topicSlug,a=e.selectedField,u=(0,s.useState)({}),d=u[0],l=u[1],f=(0,C.W)().site.siteId,p=(0,y.LT)({slug:i||r,siteId:f},{skip:"TOPIC"!==o||!(i||r)}),m=p.data,E=p.isFetching,b=(0,y.Zn)({id:null===d||void 0===d?void 0:d.refTopic},{skip:!(null===d||void 0===d?void 0:d.refTopic)}),T=b.data,M=b.isFetching;a&&m&&"TOPIC"===o&&(n=m.fields.find((function(e){return e.fieldKey===a})),t=m.fields.reduce((function(e,t){return t.type===g.iK.MULTI_REFERENCE&&e.push({code:t.fieldKey,type:g.iK.LIST,name:t.label}),e}),[]));var D=(0,y.Zn)({id:null===n||void 0===n?void 0:n.refTopic},{skip:!n}),A=D.data,P=D.isFetching,S=E||P,L=(0,s.useMemo)((function(){var e;if("TOPIC"!==o||!m&&!S)return[];var n={name:(0,c.jsx)(I.Z,{indicator:(0,c.jsx)(R.Z,{style:{fontSize:24},spin:!0}),size:"small"}),disabled:!0,isUninitialized:!0};if(S)return[n];var r=[{name:"Created At",type:g.iK.DATE,code:"{{longDate createdAt}}"},{name:"Published At",type:g.iK.DATE,code:"{{longDate publishedAt}}"},{name:"Updated At",type:g.iK.DATE,code:"{{longDate updatedAt}}"}];return(null===(e=A||m)||void 0===e?void 0:e.fields.map((function(e){var t="RICH_TEXT"===e.type?"{{{edjsRichText ".concat(e.fieldKey,"}}}"):"{{".concat(e.fieldKey,"}}");if((0,v.Z)(e.type)){if(a)return;return e.type===g.iK.MULTI_REFERENCE?{code:e.fieldKey,type:g.iK.LIST,name:e.label}:T&&!M?{codes:_({collection:T,fieldKey:e.fieldKey}),type:e.type,name:e.label,refTopic:e.refTopic}:{codes:[n],type:e.type,name:e.label,refTopic:e.refTopic}}return{code:t,type:e.type,name:e.label}})).concat(r).concat(t).filter(Boolean))||[]}),[o,m,A,T,M,S]);return{fields:{POST:a?{authors:h.EU,categories:h.FD}[a]:h.nU,TOPIC:L,CATEGORY:h.FD}[o],isLoading:S,handleSingleRefData:function(e){var t=e.refTopic;l({refTopic:t})}}},D=function(e){var t=e.slug,n=e.type,r=e.siteId,i=e.options,a=e.pageType,u={noop:y.yA,TAG:f.ZC,POST:function(e,t){var n={TAG:m.js,POST:m.YU,CATEGORY:m.St};return["CATEGORY","TAG"].includes(e)&&"POST"===t?n[e]:n[t]}(a,n),CATEGORY:p.NL,TOPIC:y.nD,SEARCH:b.E}[n||"noop"],c=!n;("TOPIC"===n||"POST"===n&&"CATEGORY"===a)&&(c=c||!t);var s=u((0,o.Z)({slug:t,siteId:r},i),{skip:c});return{data:s.data,isFetching:s.isFetching}},A=function(e){var t=e.siteId,n=e.source,o=e.currentPageSlug,c=(0,s.useState)([]),d=c[0],l=c[1],f={page:1,hasNextData:!0},m=(0,s.useRef)(f),v={noop:y.aR,TOPIC:y.MM,CATEGORY:p.WZ}[n||"noop"],h=(0,i.Z)(v({skip:!n}),2),g=h[0],b=h[1].isLoading,T=(0,s.useCallback)((function(){var e=m.current,n=e.hasNextData,o=e.page;n&&(0,r.Z)((function(){var e;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,g({siteId:t,page:o})];case 1:return(e=n.sent().data)&&(l((function(t){return(0,a.Z)(t).concat((0,a.Z)(e))})),e.length<E.LZ?m.current.hasNextData=!1:m.current={page:o+1,hasNextData:!0}),[2]}}))}))()}),[g,t]);(0,s.useEffect)((function(){m.current=f,l([]),T()}),[n]);var C=null===d||void 0===d?void 0:d.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{value:e.slug,label:e.name,id:e._id}})),I=d.flatMap((function(e){return o!==e.slug?[]:e.fields.filter((function(e){return"MULTI_REFERENCE"===e.type})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fieldKey,n=e.label;return{value:t,label:n}}))}));return{options:C,multiReferences:I,isLoading:b,fetchMoreItem:T}},P=function(e){var t=e.type,n=e.listQueryParameters,r=e.singleQueryParameters,i=(0,s.useState)({}),a=i[0],u=i[1],c=(0,o.Z)({type:t},n),d=function(e){return{ITEM:y.dg,TOPIC:y.cQ}[e]||y.yA}(t),f=function(e){return{noop:y.yA,SEARCH:y.yA,POST:m.YU,CATEGORY:p.NL,ITEM:y.zs,TOPIC:y.nD,SUBSCRIPTION_BANNER:y.yA}[e||"noop"]}(t),v=(0,T.ZP)(f,c),h=v.combinedData,E=v.loadMore,g=v.page,b=v.isLoading,C=v.reset,I=d((0,o.Z)({},r),{skip:(0,T.dJ)(r)}).data,R=(0,s.useMemo)((function(){var e=[];return I&&e.push(I),l()(e.concat(h).map((function(e){var t=e.name,n=e.title,r=void 0===n?t:n,o=e._id,i=e.id;return{label:r,value:void 0===i?o:i}})),"value")}),[h,I]);return(0,s.useEffect)((function(){Array.isArray(h)&&1===g&&u(h[0]||{})}),[h,g]),(0,s.useEffect)((function(){C()}),[n.slug]),{isLoading:b,singleItem:a,getSingleItem:function(e){var t=e.itemId;u(h.find((function(e){var n=e._id,r=e.id;return(void 0===r?n:r)===t}))||{})},options:R,data:h,fetchMoreItem:E}}},17087:function(e,t,n){"use strict";n.d(t,{md:function(){return l},rq:function(){return f}});var r=n(50930),o=n(2784),i=n(41396),a=n(37713),u=n(3585),c=n(53253),s=n(41856),d=function(){var e=(0,i.Z)().user,t=(0,a.W)().site,n=null===e||void 0===e?void 0:e.role,r=null===t||void 0===t?void 0:t.roles;(null===t||void 0===t?void 0:t.owner)&&t.owner===(null===e||void 0===e?void 0:e.id)&&(n=u.h6);var c=(0,o.useMemo)((function(){if(r&&n)return r.find((function(e){return e.key===n}))}),[r,n]);return{ac:(0,s.Rx)({role:n,permissions:c}),role:n}},l=function(){var e=d(),t=e.ac,n=e.role,o={};["read","create","update","delete"].forEach((function(e){var r="can"+e.charAt(0).toUpperCase()+e.slice(1);o[r]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];if(n&&t)return o.some((function(r){return t.can(n)[e](r).granted}))}}));var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.excludes,r=void 0===t?[]:t;return!r.includes(n)&&c.EY.includes(n)};return{canRead:o.canRead,canCreate:o.canCreate,canUpdate:o.canUpdate,canDelete:o.canDelete,hasSupperAccess:i,hasRoutePermission:function(e){var t,n,a;if(c.fO.includes(e))return!0;var u=e.split("/")[1];if(c.k5.some((function(e){return e.includes(u)})))return i();var s=c._j[u];return s?(0,c.sk)(e)?(t=o).canRead.apply(t,(0,r.Z)(s))&&(n=o).canCreate.apply(n,(0,r.Z)(s)):(a=o).canRead.apply(a,(0,r.Z)(s)):void 0},role:n}},f=function(e){var t=l(),n=t.canRead,r=t.canCreate,o=t.canUpdate,i=t.canDelete;return{canCreate:!r(e),canRead:!n(e),canUpdate:!o(e),canDelete:!i(e),title:"You don't have access to this action."}}},33033:function(e,t,n){"use strict";n.r(t);var r=n(98788),o=n(26297),i=n(5163),a=n(52322),u=n(33736),c=n(74519),s=n(39097),d=n.n(s),l=n(2784),f=n(12693),p=n(36086),m=n(17698),v=n(8388),h=n(78996),y=n(41396),E=n(37713),g=n(5632),b=n(3585),T=n(7602),C=n(81674);n(69993);Promise.resolve().then(n.bind(n,97143)).then((function(e){C.library.add(e.fab)})),n.e(7662).then(n.bind(n,42946)).then((function(e){C.library.add(e.far)})),n.e(8433).then(n.bind(n,54933)).then((function(e){C.library.add(e.fas)})),C.config.autoAddCss=!1;t.default=(0,T.Z)((function(){var e=(0,l.useRef)(),t=(0,y.Z)().user,n=(0,g.useRouter)().basePath,s=(0,E.W)({select:"id globalStyle"}),T=s.site,C=T.siteId,I=T.globalStyle,R=(0,o.Z)(s.site,["siteId","globalStyle"]),_=(0,g.useRouter)().query,M=_.pageId,D=_.itemId,A=(0,l.useState)(""),P=A[0],S=A[1],L=u.P6.grantPermission(null===t||void 0===t?void 0:t.role,"CMS"),O=n.startsWith("/v4")?"/v4":"",Z=(0,p.nH)(M,{skip:!M}).data,w=(0,p._x)({siteId:C},{skip:!C}).data,N=(0,h.BK)({listQueryParameters:{siteId:C,slug:null===Z||void 0===Z?void 0:Z.slug},type:null===Z||void 0===Z?void 0:Z.ref}).data,j=(0,l.useMemo)((function(){return(null===N||void 0===N?void 0:N.find((function(e){var t=e._id,n=e.id;return(void 0===n?t:n)===D})))||{}}),[N,D]),k=(0,l.useMemo)((function(){return{postSlug:null===R||void 0===R?void 0:R.postSlug,categorySlug:null===R||void 0===R?void 0:R.categorySlug}}),[R]),x=(0,l.useMemo)((function(){return{slugs:k,siteId:C,useCollectionItems:h.Y0,CDNDomain:v.sr,slugPrefixes:new Map,data:j}}),[k,C,j]),U=(0,l.useMemo)((function(){return C&&Z?{page:Z.draftContent?JSON.parse(Z.draftContent):void 0,siteId:C,pages:w,global:I?JSON.parse(I):void 0}:{}}),[I,Z,w,C]),F=(0,l.useMemo)((function(){return(null===U||void 0===U?void 0:U.global)&&U.global.pagesRef?new Map(U.global.pagesRef):new Map}),[null===U||void 0===U?void 0:U.global]),K=(0,l.useCallback)((function(){return(0,c.WK)({renderer:"PREVIEW",siteData:U})}),[U]);if((0,l.useEffect)((function(){(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,K()];case 1:return e=t.sent(),S(e),[2]}}))}))()}),[K]),!U.page)return null;var G=function(){return!0};return(0,a.jsx)(u.t6,{value:{Link:d(),appName:"CMS",pagesRef:F,permission:L,pages:w,interactionDisabled:!0,CDNDomain:v.sr},children:(0,a.jsxs)(u.if.Provider,{value:x,children:[(0,a.jsx)(m.Z,{children:(0,a.jsx)("title",{children:"Preview"})}),(0,a.jsx)(f.ZP,{ref:e,id:"dorik-builder-iframe",style:{border:0,width:"100vw",height:"100vh",borderStyle:"none",background:"#ffffff",verticalAlign:"middle"},head:(0,a.jsxs)(u.h4,{data:U,disableIntegration:!0,userRoles:[b.B7],children:[(0,a.jsx)("link",{rel:"stylesheet",href:"".concat(O,"/css/main.css")}),P?(0,a.jsx)("style",{children:P}):null]}),children:(0,a.jsx)(f.Kr,{children:function(e){var t=e.document;return function(e,t){var n=t.head.querySelector('link[href="https://assets.dorik.com/shared/aos.css"]'),r=t.body.querySelector('script[src="https://assets.dorik.com/shared/aos.js"]');if(!n||!r){var o=t.createElement("link");o.href="https://assets.dorik.com/shared/aos.css",o.rel="stylesheet";var i=t.createElement("script");i.src="https://assets.dorik.com/shared/aos.js",t.body.appendChild(i),t.head.appendChild(o);var a=setInterval((function(){e.AOS&&(e.AOS.init(),clearInterval(a))}),500)}}(e.window,t),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.MJ,{data:U}),(0,a.jsx)(u.uT,{userRoles:[],data:U,renderer:"PREVIEW",appName:"CMS",interactionDisabled:!0,canRender:G,permission:L})]})}})})]})})}))},42086:function(e,t,n){"use strict";n.d(t,{SZ:function(){return d},h2:function(){return s},iK:function(){return u},sf:function(){return c}});var r,o,i=n(47842),a=n(66383),u={DATE:"DATE",TEXT:"TEXT",LINK:"LINK",LIST:"LIST",IMAGE:"IMAGE",EMAIL:"EMAIL",NUMBER:"NUMBER",RICH_TEXT:"RICH_TEXT",MULTI_SELECT:"MULTI_SELECT",SINGLE_SELECT:"SINGLE_SELECT",MULTI_REFERENCE:"MULTI_REFERENCE",SINGLE_REFERENCE:"SINGLE_REFERENCE"},c=(r={},(0,i.Z)(r,u.TEXT,"Text"),(0,i.Z)(r,u.LINK,"Link"),(0,i.Z)(r,u.IMAGE,"Image"),(0,i.Z)(r,u.EMAIL,"Email"),(0,i.Z)(r,u.NUMBER,"Number"),(0,i.Z)(r,u.RICH_TEXT,"Rich text"),(0,i.Z)(r,u.SINGLE_SELECT,"Select (single)"),(0,i.Z)(r,u.SINGLE_REFERENCE,"Single reference"),(0,i.Z)(r,u.MULTI_REFERENCE,"Multiple reference"),r),s=(o={},(0,i.Z)(o,u.LINK,"example.com"),(0,i.Z)(o,u.IMAGE,"example.com"),(0,i.Z)(o,u.EMAIL,"dummyMail@dummy.com"),(0,i.Z)(o,u.NUMBER,10),(0,i.Z)(o,u.RICH_TEXT,"html content goes here as string"),(0,i.Z)(o,u.SINGLE_SELECT,"must be a string/text"),(0,i.Z)(o,u.SINGLE_REFERENCE,"[ITEM_ID]"),(0,i.Z)(o,u.MULTI_REFERENCE,"[ITEM_ONE_ID,ITEM_TWO_ID...]"),o),d=Object.entries(c).map((function(e){var t=(0,a.Z)(e,2),n=t[0];return{label:t[1],value:n}}))},13800:function(e,t,n){"use strict";var r=n(8388);t.Z=function(e){return e?e.startsWith(r.sr)?e:"".concat(r.sr,"/").concat(e):"https://app.dorik.dev/assets/images/user-thumb.png"}},28684:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(42086),o=function(e){return[r.iK.SINGLE_REFERENCE,r.iK.MULTI_REFERENCE].includes(e)}},56127:function(e,t,n){"use strict";n.d(t,{EU:function(){return l},FD:function(){return d},nU:function(){return s}});var r=n(42086),o=r.iK.DATE,i=r.iK.TEXT,a=r.iK.RICH_TEXT,u=r.iK.IMAGE,c=r.iK.LIST,s=[{name:"Post Title",type:i,code:"{{title}}"},{name:"Post Content",type:a,code:"{{{edjsRichText content}}}"},{type:i,name:"Slug",code:"{{slug}}"},{name:"Authors Name",type:i,code:"{{authorsName authors}}"},{name:"Meta Title",type:i,code:"{{meta.title}}"},{name:"Excerpt",type:i,code:"{{excerpt}}"},{name:"Meta Description",type:i,code:"{{meta.description}}"},{name:"Meta Keywords",type:i,code:"{{meta.keywords}}"},{name:"Banner Image",type:u,code:"{{bannerImage}}"},{name:"Thumbnail Image",type:u,code:"{{thumbnailImage}}"},{type:o,name:"Post Creation Date",code:"{{longDate createdAt}}"},{type:o,name:"Post Update Date",code:"{{longDate updatedAt}}"},{type:o,name:"Post Publish Date",code:"{{longDate publishedAt}}"},{name:"Category List",type:c,code:"categories"},{name:"Author's Name",type:c,code:"authors"}],d=[{name:"Category Name",type:i,code:"{{name}}"},{name:"Category Slug",type:i,code:"{{slug}}"},{type:o,name:"Creation Date",code:"{{longDate createdAt}}"},{type:o,name:"Update Date",code:"{{longDate updatedAt}}"},{type:o,name:"Publish Date",code:"{{longDate publishedAt}}"}],l=[{name:"Author Name",type:i,code:"{{name}}"},{name:"Author Avatar",type:u,code:"{{avatar}}"}]},53253:function(e,t,n){"use strict";n.d(t,{EY:function(){return S},Xf:function(){return D},_j:function(){return m},fO:function(){return A},k5:function(){return P},sk:function(){return L}});var r=n(41856),o=r.Jb.SITE,i=r.Jb.POST,a=r.Jb.PAGE,u=r.Jb.TOPIC,c=r.Jb.API_KEY,s=r.Jb.SITEMAP,d=r.Jb.CATEGORY,l=r.Jb.MEMBERSHIP,f=r.Jb.WEBHOOK_URL,p=r.Jb.URL_REDIRECT,m=(r.Jb.PRESIGNED_URL,r.Jb.MEDIA_LIBRARY,{posts:[i],post:[i],collection:[u],members:[l],categories:[d],design:[a],redirects:[p],"api-keys":[r.Jb.PUBLIC_API_KEY],"activity-logs":[r.Jb.ACTIVITY_LOG],webhook:[f]}),v="/webhook",h="/api-keys",y="/redirects",E="/team-members",g="/activity-logs",b="/agency-config",T="/client-billing",C="/members/settings",I="/team-members/roles",R="/additional-settings",_="/",M="/login",D=[r.uJ.subscriber],A=[_,M],P=[v,h,y,E,T,b,g,C,I,R],S=[r.uJ.admin,r.uJ.superUser,r.uJ.sysAdmin,r.uJ.sysReviewer],L=function(e){return/^\/post\/create-new|^\/collection\/.+\/item\/create-new/gi.test(e)}},65964:function(e,t,n){"use strict";n.d(t,{dJ:function(){return c}});var r=n(70865),o=n(50930),i=n(8388),a=n(2784),u=function(e){return null!=e},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if(!Object.keys(e).length)return!0;var n=function(e){return Object.values(e).every((function(e){return"[object Object]"===Object.prototype.toString.call(e)?n(e):t(e)}))};return!n(e)};t.ZP=function(e,t){var n=(0,a.useState)(0),u=n[0],s=n[1],d=!u||c(t),l=(0,a.useState)([]),f=l[0],p=l[1],m=e((0,r.Z)({page:u,perPage:i.LZ},t),{skip:d}),v=m.data,h=m.isLoading,y=m.isFetching;(0,a.useEffect)((function(){Array.isArray(v)&&p((function(e){return 1===u?v:(0,o.Z)(e).concat((0,o.Z)(v))}))}),[v,u]);return{page:u,reset:function(){s(1)},loadMore:function(e){var t;if("focus"===(null===e||void 0===e?void 0:e.type))return s((function(e){return 0===e?1:e}));t=v,Array.isArray(t)&&t.length>0&&v.length===i.LZ&&s((function(e){return e+1}))},isLoading:h,isFetching:y,combinedData:f}}},97729:function(e,t,n){e.exports=n(75913)},89050:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2784),i=(a(o),a(n(13980)));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.props.contentDidMount()}},{key:"componentDidUpdate",value:function(){this.props.contentDidUpdate()}},{key:"render",value:function(){return o.Children.only(this.props.children)}}]),t}(o.Component);s.propTypes={children:i.default.element.isRequired,contentDidMount:i.default.func.isRequired,contentDidUpdate:i.default.func.isRequired},t.default=s},86696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameContextConsumer=t.FrameContextProvider=t.useFrame=t.FrameContext=void 0;var r,o=n(2784),i=(r=o)&&r.__esModule?r:{default:r};var a=void 0,u=void 0;"undefined"!==typeof document&&(a=document),"undefined"!==typeof window&&(u=window);var c=t.FrameContext=i.default.createContext({document:a,window:u}),s=(t.useFrame=function(){return i.default.useContext(c)},c.Provider),d=c.Consumer;t.FrameContextProvider=s,t.FrameContextConsumer=d},54540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Frame=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2784),a=l(i),u=l(n(28316)),c=l(n(13980)),s=n(86696),d=l(n(89050));function l(e){return e&&e.__esModule?e:{default:e}}var f=t.Frame=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.setRef=function(e){r.nodeRef.current=e;var t=r.props.forwardedRef;"function"===typeof t?t(e):t&&(t.current=e)},r.handleLoad=function(){clearInterval(r.loadCheck),r.state.iframeLoaded||r.setState({iframeLoaded:!0})},r.loadCheck=function(){return setInterval((function(){r.handleLoad()}),500)},r._isMounted=!1,r.nodeRef=a.default.createRef(),r.state={iframeLoaded:!1},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getDoc()&&this.nodeRef.current.contentWindow.addEventListener("DOMContentLoaded",this.handleLoad)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.nodeRef.current.removeEventListener("DOMContentLoaded",this.handleLoad)}},{key:"getDoc",value:function(){return this.nodeRef.current?this.nodeRef.current.contentDocument:null}},{key:"getMountTarget",value:function(){var e=this.getDoc();return this.props.mountTarget?e.querySelector(this.props.mountTarget):e.body.children[0]}},{key:"renderFrameContents",value:function(){if(!this._isMounted)return null;var e=this.getDoc();if(!e)return null;var t=this.props.contentDidMount,n=this.props.contentDidUpdate,r=e.defaultView||e.parentView,o=a.default.createElement(d.default,{contentDidMount:t,contentDidUpdate:n},a.default.createElement(s.FrameContextProvider,{value:{document:e,window:r}},a.default.createElement("div",{className:"frame-content"},this.props.children))),i=this.getMountTarget();return[u.default.createPortal(this.props.head,this.getDoc().head),u.default.createPortal(o,i)]}},{key:"render",value:function(){var e=r({},this.props,{srcDoc:this.props.initialContent,children:void 0});return delete e.head,delete e.initialContent,delete e.mountTarget,delete e.contentDidMount,delete e.contentDidUpdate,delete e.forwardedRef,a.default.createElement("iframe",r({},e,{ref:this.setRef,onLoad:this.handleLoad}),this.state.iframeLoaded&&this.renderFrameContents())}}]),t}(i.Component);f.propTypes={style:c.default.object,head:c.default.node,initialContent:c.default.string,mountTarget:c.default.string,contentDidMount:c.default.func,contentDidUpdate:c.default.func,children:c.default.oneOfType([c.default.element,c.default.arrayOf(c.default.element)])},f.defaultProps={style:{},head:null,children:void 0,mountTarget:void 0,contentDidMount:function(){},contentDidUpdate:function(){},initialContent:'<!DOCTYPE html><html><head></head><body><div class="frame-root"></div></body></html>'},t.default=a.default.forwardRef((function(e,t){return a.default.createElement(f,r({},e,{forwardedRef:t}))}))},12693:function(e,t,n){"use strict";var r=n(54540);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}});var o=n(86696);Object.defineProperty(t,"Kr",{enumerable:!0,get:function(){return o.FrameContextConsumer}})}},function(e){e.O(0,[1001,4078,2220,2808,7418,4636,3736,4519,9774,2888,179],(function(){return t=24706,e(e.s=t);var t}));var t=e.O();_N_E=t}]);